# Configuration

Musium reads all settings from a configuration file. The location of the config
file is passed as an argument to the program. Config files consist of key-value
pairs with `=` separator, and support `#` for comments.

## Example

    # Note: listening on port 80 requires CAP_NET_BIND_SERVICE.
    # If you want to run as an unprivileged user, use a port beyond 1024.
    listen = 0.0.0.0:80

    library_path = /home/media/music
    covers_path = /var/cache/musium/covers

    audio_device = UMC404HD 192k
    audio_volume_control = UMC404HD 192k Output

## Options

The following options are available. Unless noted otherwise, all options must be
specified exactly once.

### `listen`

The address and port to bind to, for example `0.0.0.0:80`. Use `0.0.0.0` as the
address to listen for external connections, to make the player available to the
entire local network, or use `localhost` to listen only on loopback.

The listen address is optional and defaults to `0.0.0.0:8233`.

### `library_path`

The directory to recursively scan for flac files.

### `covers_path`

The directory to store cover art thumbnails in. These are generated by the
`cache` subcommand, and served by the `serve` subcommand. The directory must
exist.

### `play_log_path`

The file to write json-formatted playback events to. The format consists of one
json object per line, where every object represents a single event. The play log
path is optional: when not set, play logs are not written.

### `audio_device`

The <abbr>Alsa</abbr> card used for playback. When the configured card cannot
be found, Musium will list all of the cards that are available. Musium uses the
<abbr>Alsa</abbr> hardware device directly, there is no need nor support for
PulseAudio.

### audio_volume_control

The <abbr>Alsa</abbr> simple mixer control that controls playback volume. Often
there are controls named `Master`, `PCM`, and `Speakers`, but this differs from
card to card. Use `amixer scontrols` to list available controls. Be sure to run
this with the right privileges (possibly as superuser, or as a user in the
`audio` group) to reveal all available controls.

Musium assumes exclusive control over this mixer control, so you should not
manipulate it manually with tools like Alsamixer after starting Musium. In
particular, Musium adjusts the volume to perform loudness normalization, so even
for a constant target playback volume, Musium will manipulate the mixer control.
